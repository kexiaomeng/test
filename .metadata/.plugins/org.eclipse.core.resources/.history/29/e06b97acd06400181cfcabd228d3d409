package com.nari.sun.netty;


import java.nio.ByteBuffer;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import io.netty.buffer.ByteBuf;
import io.netty.buffer.ByteBufUtil;
import io.netty.buffer.Unpooled;
import io.netty.channel.ChannelHandlerAdapter;
import io.netty.channel.ChannelHandlerContext;

public class TestHandler extends ChannelHandlerAdapter{
	
	public TestHandler(){
		
	}
	@Override
	public void channelRead(ChannelHandlerContext ctx, Object msg){
		ByteBuf buffer = Unpooled.buffer(60);
		try {
			buffer = (ByteBuf)msg;
			ByteBuffer buffer1 = buffer.nioBuffer();
			System.out.println(ByteBufUtil.hexDump(buffer1.array()));
		} catch (Exception e) {
			System.out.println(e);
			// TODO: handle exception
		}
		
//		ctx.writeAndFlush("back to client");
		System.out.println("received from client");
//		System.out.println("message: "+(String)msg);
//		ctx.writeAndFlush("hello world 1");
	}
	@Override
	public void channelActive(ChannelHandlerContext ctx){
		System.out.println("test");
		
	}

	
	  public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause)
      throws Exception
  {
//		  ctx.close();
		  System.out.println("errrrrrrrrrrr");
		  System.out.println(cause);
      ctx.fireExceptionCaught(cause);
  }
		
}
